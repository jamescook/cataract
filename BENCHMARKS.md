<!-- AUTO-GENERATED FILE - DO NOT EDIT -->
<!-- This file is automatically generated from benchmark results. -->
<!-- To regenerate: rake benchmark:generate_docs -->

# Performance Benchmarks

Performance comparison between Cataract's C extension and pure Ruby implementations, with css_parser as a reference.

## Test Environment

- **Ruby**: ruby 3.4.7 (2025-10-08 revision 7a5688e2a2) +YJIT +PRISM [arm64-darwin23]
- **CPU**: Apple M1 Pro
- **Memory**: 32GB
- **OS**: macOS 14.5
- **Generated**: 2025-11-11T16:02:08-06:00

## CSS Parsing

Time to parse CSS into internal data structures

| Test Case | Native | Pure (no YJIT) | Pure (YJIT) | css_parser (no YJIT) | css_parser (YJIT) |
|-----------|--------|----------------|-------------|----------------------|-------------------|
| Small CSS (64 lines, 1.0KB) | 63.2K i/s | 3.56K i/s | 15.49K i/s | 4.7K i/s | 6.39K i/s |
| Medium CSS with @media (139 lines, 1.6KB) | 40.14K i/s | 2.07K i/s | 8.76K i/s | 2.81K i/s | 3.54K i/s |

### Speedups

| Comparison | Speedup |
|------------|---------|
| Native vs Pure (no YJIT) | 18.58x faster (avg) |
| Native vs Pure (YJIT) | 4.26x faster (avg) |
| YJIT impact on Pure Ruby | 4.31x faster (avg) |

---

## CSS Serialization

Time to convert parsed CSS back to string format

| Test Case | Native | Pure (no YJIT) | Pure (YJIT) | css_parser (no YJIT) | css_parser (YJIT) |
|-----------|--------|----------------|-------------|----------------------|-------------------|
| Full Serialization (Bootstrap CSS - 191KB) | 1.79K i/s | 442.2 i/s | 716.9 i/s | 38.5 i/s | 39.7 i/s |
| Media Type Filtering (print only) | 282.98K i/s | 114.55K i/s | 167.51K i/s | 2.74K i/s | 4.32K i/s |

### Speedups

| Comparison | Speedup |
|------------|---------|
| Native vs Pure (no YJIT) | 3.26x faster (avg) |
| Native vs Pure (YJIT) | 1.69x faster (avg) |
| YJIT impact on Pure Ruby | 1.46x faster (avg) |

---

## Specificity Calculation

Time to calculate CSS selector specificity values

| Test Case | Native | Pure (no YJIT) | Pure (YJIT) | css_parser (no YJIT) | css_parser (YJIT) |
|-----------|--------|----------------|-------------|----------------------|-------------------|
| Simple Selectors | 8.31M i/s | 499.15K i/s | 2.59M i/s | 370.14K i/s | 344.42K i/s |
| Compound Selectors | 6.57M i/s | 184.61K i/s | 403.41K i/s | 223.76K i/s | 204.19K i/s |
| Combinators | 5.24M i/s | 144.7K i/s | 253.9K i/s | 188.05K i/s | 177.88K i/s |
| Pseudo-classes & Pseudo-elements | 5.39M i/s | 115.46K i/s | 194.13K i/s | 116.96K i/s | 109.64K i/s |
| :not() Pseudo-class (CSS3) | 3.31M i/s | 101.48K i/s | 160.62K i/s | 144.35K i/s | 141.24K i/s |
| Complex Real-world Selectors | 4.09M i/s | 51.63K i/s | 77.37K i/s | 82.16K i/s | 80.6K i/s |

### Speedups

| Comparison | Speedup |
|------------|---------|
| Native vs Pure (no YJIT) | 41.16x faster (avg) |
| Native vs Pure (YJIT) | 8.94x faster (avg) |
| YJIT impact on Pure Ruby | 3.36x faster (avg) |

---

## CSS Merging

Time to merge multiple CSS rule sets with same selector

| Test Case | Native | Pure (no YJIT) | Pure (YJIT) | css_parser (no YJIT) | css_parser (YJIT) |
|-----------|--------|----------------|-------------|----------------------|-------------------|
| No shorthand properties (large) | 11.5K i/s | 3.14K i/s | 5.32K i/s | 1.59K i/s | 2.35K i/s |
| Simple properties | 116.34K i/s | 75.52K i/s | 102.15K i/s | 28.3K i/s | 41.73K i/s |
| Cascade with specificity | 135.78K i/s | 77.92K i/s | 109.05K i/s | 32.02K i/s | 47.52K i/s |
| Important declarations | 135.96K i/s | 78.0K i/s | 108.97K i/s | 31.36K i/s | 46.66K i/s |
| Shorthand expansion | 11.5K i/s | 3.14K i/s | 5.32K i/s | 1.59K i/s | 2.35K i/s |
| Complex merging | 22.76K i/s | 16.05K i/s | 22.07K i/s | 11.66K i/s | 16.92K i/s |

### Speedups

| Comparison | Speedup |
|------------|---------|
| Native vs Pure (no YJIT) | 1.93x faster (avg) |
| Native vs Pure (YJIT) | 1.19x faster (avg) |
| YJIT impact on Pure Ruby | 1.39x faster (avg) |

---

## Running Benchmarks

```bash
# All benchmarks
rake benchmark

# Individual benchmarks
rake benchmark:parsing
rake benchmark:serialization
rake benchmark:specificity
rake benchmark:merging

# Generate documentation
rake benchmark:generate_docs
```

## Notes

- Benchmarks use benchmark-ips with 1-2s warmup and 2-5s measurement periods
- Measurements show median iterations per second (i/s)
- css_parser gem is included for reference comparison
- YJIT is enabled/disabled per subprocess for accurate comparison
