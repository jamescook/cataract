<!-- AUTO-GENERATED FILE - DO NOT EDIT -->
<!-- This file is automatically generated from benchmark results. -->
<!-- To regenerate: rake benchmark:generate_docs -->

# Performance Benchmarks

Performance comparison between Cataract's C extension and pure Ruby implementations.

## Test Environment

- **Ruby**: ruby 3.4.7 (2025-10-08 revision 7a5688e2a2) +YJIT +PRISM [arm64-darwin23]
- **CPU**: Apple M1 Pro
- **Memory**: 32GB
- **OS**: macOS 14.5
- **Generated**: 2025-11-11T16:02:08-06:00

## CSS Parsing

Time to parse CSS into internal data structures

| Test Case | Native | Pure (no YJIT) | Pure (YJIT) |
|-----------|--------|----------------|-------------|
| Small CSS (64 lines, 1.0KB) | 37.73K i/s | 3.29K i/s | 13.86K i/s |
| Medium CSS with @media (139 lines, 1.6KB) | 35.35K i/s | 2.06K i/s | 9.23K i/s |
| Selector lists (3500 lines, 62.5KB, 500 lists) | 486.5 i/s | 56.2 i/s | 217.5 i/s |

### Speedups

| Comparison | Speedup |
|------------|---------|
| Native vs Pure (no YJIT) | 12.93x faster (avg) |
| Native vs Pure (YJIT) | 2.98x faster (avg) |
| YJIT impact on Pure Ruby | 4.29x faster (avg) |

---

## CSS Serialization

Time to convert parsed CSS back to string format

| Test Case | Native | Pure (no YJIT) | Pure (YJIT) |
|-----------|--------|----------------|-------------|
| to_s (Bootstrap - 191KB) | 1.16K i/s | 34.9 i/s | 49.7 i/s |
| to_s (Compact utilities - 2.9KB) | 1.16K i/s | 34.9 i/s | 49.7 i/s |
| to_formatted_s (Nested CSS - 1.3KB) | 158.75K i/s | 63.62K i/s | 114.79K i/s |
| to_s with selector_lists (3.4KB) | 17.95K i/s | 1.43K i/s | 1.99K i/s |
| Media filtering (Bootstrap print only) | 235.05K i/s | 98.95K i/s | 149.3K i/s |

### Speedups

| Comparison | Speedup |
|------------|---------|
| Native vs Pure (no YJIT) | 10.97x faster (avg) |
| Native vs Pure (YJIT) | 7.56x faster (avg) |
| YJIT impact on Pure Ruby | 1.57x faster (avg) |

---

## Specificity Calculation

Time to calculate CSS selector specificity values

| Test Case | Native | Pure (no YJIT) | Pure (YJIT) |
|-----------|--------|----------------|-------------|
| Simple Selectors | 8.42M i/s | 508.29K i/s | 2.6M i/s |
| Compound Selectors | 6.6M i/s | 186.16K i/s | 400.7K i/s |
| Combinators | 5.21M i/s | 147.76K i/s | 255.26K i/s |
| Pseudo-classes & Pseudo-elements | 5.39M i/s | 117.25K i/s | 196.91K i/s |
| :not() Pseudo-class (CSS3) | 3.48M i/s | 103.11K i/s | 164.66K i/s |
| Complex Real-world Selectors | 4.05M i/s | 52.17K i/s | 78.28K i/s |

### Speedups

| Comparison | Speedup |
|------------|---------|
| Native vs Pure (no YJIT) | 40.75x faster (avg) |
| Native vs Pure (YJIT) | 23.38x faster (avg) |
| YJIT impact on Pure Ruby | 2.29x faster (avg) |

---

## CSS Flattening (Cascade)

Time to flatten multiple CSS rule sets with same selector

| Test Case | Native | Pure (no YJIT) | Pure (YJIT) |
|-----------|--------|----------------|-------------|
| No shorthand properties (large) | 14.11K i/s | 3.26K i/s | 6.41K i/s |
| Simple properties | 144.76K i/s | 71.31K i/s | 102.17K i/s |
| Cascade with specificity | 171.86K i/s | 69.44K i/s | 101.07K i/s |
| Important declarations | 171.62K i/s | 69.21K i/s | 101.08K i/s |
| Shorthand expansion | 14.11K i/s | 3.26K i/s | 6.41K i/s |
| Complex flattening | 29.99K i/s | 15.88K i/s | 22.46K i/s |

### Speedups

| Comparison | Speedup |
|------------|---------|
| Native vs Pure (no YJIT) | 2.53x faster (avg) |
| Native vs Pure (YJIT) | 1.62x faster (avg) |
| YJIT impact on Pure Ruby | 1.53x faster (avg) |

---

## Running Benchmarks

```bash
# All benchmarks
rake benchmark

# Individual benchmarks
rake benchmark:parsing
rake benchmark:serialization
rake benchmark:specificity
rake benchmark:flattening

# Generate documentation
rake benchmark:generate_docs
```

## Notes

- Benchmarks use benchmark-ips with 1-2s warmup and 2-5s measurement periods
- Measurements show median iterations per second (i/s)
- YJIT is enabled/disabled per subprocess for accurate comparison
