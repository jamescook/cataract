<!-- AUTO-GENERATED FILE - DO NOT EDIT -->
<!-- This file is automatically generated from benchmark results. -->
<!-- To regenerate: rake benchmark:generate_docs -->

# Performance Benchmarks

Performance comparison between Cataract's C extension and pure Ruby implementations, with css_parser as a reference.

## Test Environment

- **Ruby**: ruby 3.4.7 (2025-10-08 revision 7a5688e2a2) +YJIT +PRISM [arm64-darwin23]
- **CPU**: Apple M1 Pro
- **Memory**: 32GB
- **OS**: macOS 14.5
- **Generated**: 2025-11-11T16:02:08-06:00

## CSS Parsing

Time to parse CSS into internal data structures

| Test Case | Native | Pure (no YJIT) | Pure (YJIT) | css_parser (no YJIT) | css_parser (YJIT) |
|-----------|--------|----------------|-------------|----------------------|-------------------|
| Small CSS (64 lines, 1.0KB) | 62.47K i/s | 3.59K i/s | 15.67K i/s | 4.73K i/s | 6.17K i/s |
| Medium CSS with @media (139 lines, 1.6KB) | 39.7K i/s | 2.05K i/s | 8.64K i/s | 2.76K i/s | 3.52K i/s |

### Speedups

| Comparison | Speedup |
|------------|---------|
| Native vs Pure (no YJIT) | 18.4x faster (avg) |
| Native vs Pure (YJIT) | 4.2x faster (avg) |
| YJIT impact on Pure Ruby | 4.31x faster (avg) |

---

## CSS Serialization

Time to convert parsed CSS back to string format

| Test Case | Native | Pure (no YJIT) | Pure (YJIT) | css_parser (no YJIT) | css_parser (YJIT) |
|-----------|--------|----------------|-------------|----------------------|-------------------|
| Full Serialization (Bootstrap CSS - 191KB) | 1.77K i/s | 444.3 i/s | 676.3 i/s | 37.1 i/s | 35.9 i/s |
| Media Type Filtering (print only) | 282.58K i/s | 114.27K i/s | 155.82K i/s | 2.67K i/s | 4.03K i/s |

### Speedups

| Comparison | Speedup |
|------------|---------|
| Native vs Pure (no YJIT) | 3.23x faster (avg) |
| Native vs Pure (YJIT) | 1.82x faster (avg) |
| YJIT impact on Pure Ruby | 1.36x faster (avg) |

---

## Specificity Calculation

Time to calculate CSS selector specificity values

| Test Case | Native | Pure (no YJIT) | Pure (YJIT) | css_parser (no YJIT) | css_parser (YJIT) |
|-----------|--------|----------------|-------------|----------------------|-------------------|
| Simple Selectors | 7.35M i/s | 506.04K i/s | 2.59M i/s | 357.72K i/s | 353.42K i/s |
| Compound Selectors | 6.36M i/s | 184.96K i/s | 406.99K i/s | 216.59K i/s | 214.86K i/s |
| Combinators | 5.04M i/s | 146.91K i/s | 252.94K i/s | 185.44K i/s | 183.71K i/s |
| Pseudo-classes & Pseudo-elements | 5.1M i/s | 116.46K i/s | 197.06K i/s | 113.05K i/s | 113.99K i/s |
| :not() Pseudo-class (CSS3) | 3.23M i/s | 102.63K i/s | 161.55K i/s | 144.04K i/s | 144.53K i/s |
| Complex Real-world Selectors | 4.01M i/s | 52.03K i/s | 77.65K i/s | 83.91K i/s | 82.03K i/s |

### Speedups

| Comparison | Speedup |
|------------|---------|
| Native vs Pure (no YJIT) | 39.27x faster (avg) |
| Native vs Pure (YJIT) | 8.43x faster (avg) |
| YJIT impact on Pure Ruby | 3.32x faster (avg) |

---

## CSS Flattening (Cascade)

Time to flatten multiple CSS rule sets with same selector

| Test Case | Native | Pure (no YJIT) | Pure (YJIT) | css_parser (no YJIT) | css_parser (YJIT) |
|-----------|--------|----------------|-------------|----------------------|-------------------|
| No shorthand properties (large) | 21.34K i/s | 3.11K i/s | 5.23K i/s | 1.58K i/s | 2.3K i/s |
| Simple properties | 158.81K i/s | 75.72K i/s | 102.44K i/s | 28.29K i/s | 40.72K i/s |
| Cascade with specificity | 204.11K i/s | 77.93K i/s | 108.77K i/s | 31.92K i/s | 46.39K i/s |
| Important declarations | 203.43K i/s | 77.88K i/s | 109.38K i/s | 31.25K i/s | 45.25K i/s |
| Shorthand expansion | 21.34K i/s | 3.11K i/s | 5.23K i/s | 1.58K i/s | 2.3K i/s |
| Complex merging | 30.94K i/s | 16.09K i/s | 21.57K i/s | 11.6K i/s | 16.63K i/s |

### Speedups

| Comparison | Speedup |
|------------|---------|
| Native vs Pure (no YJIT) | 3.03x faster (avg) |
| Native vs Pure (YJIT) | 1.72x faster (avg) |
| YJIT impact on Pure Ruby | 1.38x faster (avg) |

---

## Running Benchmarks

```bash
# All benchmarks
rake benchmark

# Individual benchmarks
rake benchmark:parsing
rake benchmark:serialization
rake benchmark:specificity
rake benchmark:flattening

# Generate documentation
rake benchmark:generate_docs
```

## Notes

- Benchmarks use benchmark-ips with 1-2s warmup and 2-5s measurement periods
- Measurements show median iterations per second (i/s)
- css_parser gem is included for reference comparison
- YJIT is enabled/disabled per subprocess for accurate comparison
