<!-- AUTO-GENERATED FILE - DO NOT EDIT -->
<!-- This file is automatically generated from benchmark results. -->
<!-- To regenerate: rake benchmark:generate_docs -->

# Performance Benchmarks

Performance comparison between Cataract's C extension and pure Ruby implementations.

## Test Environment

- **Ruby**: ruby 3.4.7 (2025-10-08 revision 7a5688e2a2) +YJIT +PRISM [arm64-darwin23]
- **CPU**: Apple M1 Pro
- **Memory**: 32GB
- **OS**: macOS 14.5
- **Generated**: 2025-11-11T16:02:08-06:00

## CSS Parsing

Time to parse CSS into internal data structures

| Test Case | Native | Pure (no YJIT) | Pure (YJIT) |
|-----------|--------|----------------|-------------|
| Small CSS (64 lines, 1.0KB) | 37.19K i/s | 3.34K i/s | 13.61K i/s |
| Medium CSS with @media (139 lines, 1.6KB) | 34.51K i/s | 2.09K i/s | 9.04K i/s |
| Selector lists (3500 lines, 62.5KB, 500 lists) | 484.1 i/s | 57.1 i/s | 214.0 i/s |

### Speedups

| Comparison | Speedup |
|------------|---------|
| Native vs Pure (no YJIT) | 14.02x faster (avg) |
| Native vs Pure (YJIT) | 3.32x faster (avg) |
| YJIT impact on Pure Ruby | 4.19x faster (avg) |

### Parse Error Checking Overhead

Parse error detection can be enabled with `raise_parse_errors: true`. This compares performance impact:

| Configuration | Native | Pure (no YJIT) | Pure (YJIT) |
|---------------|--------|----------------|-------------|
| Medium CSS (139 lines) - no error checking | 35.27K i/s | 2.09K i/s | 9.11K i/s |
| Medium CSS (139 lines) - with error checking | 35.18K i/s | 2.08K i/s | 8.63K i/s |

**Overhead Analysis:**


| Implementation | Overhead |
|----------------|----------|
| Native | ~0% (within noise) |
| Pure (no YJIT) | ~0% (within noise) |
| Pure (YJIT) | 5.6% slower |

---

## CSS Serialization

Time to convert parsed CSS back to string format

| Test Case | Native | Pure (no YJIT) | Pure (YJIT) |
|-----------|--------|----------------|-------------|
| to_s (Bootstrap - 191KB) | 1.32K i/s | 360.2 i/s | 656.6 i/s |
| to_s (Compact utilities - 2.9KB) | 1.32K i/s | 360.2 i/s | 656.6 i/s |
| to_formatted_s (Nested CSS - 1.3KB) | 176.13K i/s | 60.97K i/s | 121.5K i/s |
| to_s with selector_lists (3.4KB) | 19.03K i/s | 8.01K i/s | 14.2K i/s |
| Media filtering (Bootstrap print only) | 283.24K i/s | 97.28K i/s | 161.56K i/s |

### Speedups

| Comparison | Speedup |
|------------|---------|
| Native vs Pure (no YJIT) | 3.24x faster (avg) |
| Native vs Pure (YJIT) | 1.73x faster (avg) |
| YJIT impact on Pure Ruby | 1.86x faster (avg) |

---

## Specificity Calculation

Time to calculate CSS selector specificity values

| Test Case | Native | Pure (no YJIT) | Pure (YJIT) |
|-----------|--------|----------------|-------------|
| Simple Selectors | 7.28M i/s | 506.61K i/s | 2.45M i/s |
| Compound Selectors | 6.4M i/s | 186.62K i/s | 405.15K i/s |
| Combinators | 5.04M i/s | 147.07K i/s | 255.92K i/s |
| Pseudo-classes & Pseudo-elements | 5.17M i/s | 117.16K i/s | 195.12K i/s |
| :not() Pseudo-class (CSS3) | 3.48M i/s | 103.47K i/s | 161.34K i/s |
| Complex Real-world Selectors | 4.01M i/s | 52.41K i/s | 77.48K i/s |

### Speedups

| Comparison | Speedup |
|------------|---------|
| Native vs Pure (no YJIT) | 39.54x faster (avg) |
| Native vs Pure (YJIT) | 23.05x faster (avg) |
| YJIT impact on Pure Ruby | 2.24x faster (avg) |

---

## CSS Flattening (Cascade)

Time to flatten multiple CSS rule sets with same selector

| Test Case | Native | Pure (no YJIT) | Pure (YJIT) |
|-----------|--------|----------------|-------------|
| No shorthand properties (large) | 13.91K i/s | 3.23K i/s | 6.39K i/s |
| Simple properties | 144.19K i/s | 71.11K i/s | 101.38K i/s |
| Cascade with specificity | 172.96K i/s | 69.16K i/s | 99.23K i/s |
| Important declarations | 173.35K i/s | 69.12K i/s | 100.16K i/s |
| Shorthand expansion | 13.91K i/s | 3.23K i/s | 6.39K i/s |
| Complex flattening | 29.86K i/s | 15.77K i/s | 22.09K i/s |

### Speedups

| Comparison | Speedup |
|------------|---------|
| Native vs Pure (no YJIT) | 2.54x faster (avg) |
| Native vs Pure (YJIT) | 1.63x faster (avg) |
| YJIT impact on Pure Ruby | 1.53x faster (avg) |

---

## Running Benchmarks

```bash
# All benchmarks
rake benchmark

# Individual benchmarks
rake benchmark:parsing
rake benchmark:serialization
rake benchmark:specificity
rake benchmark:flattening

# Generate documentation
rake benchmark:generate_docs
```

## Notes

- Benchmarks use benchmark-ips with 1-2s warmup and 2-5s measurement periods
- Measurements show median iterations per second (i/s)
- YJIT is enabled/disabled per subprocess for accurate comparison
