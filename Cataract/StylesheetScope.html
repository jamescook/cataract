<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  Class: Cataract::StylesheetScope
  
    &mdash; Cataract - Fast CSS Parser
  
</title>

  <link rel="stylesheet" href="../css/style.css" type="text/css" />

  <link rel="stylesheet" href="../css/common.css" type="text/css" />

<script type="text/javascript">
  pathId = "Cataract::StylesheetScope";
  relpath = '../';
</script>


  <script type="text/javascript" charset="utf-8" src="../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="../class_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="../_index.html">Index (S)</a> &raquo;
    <span class='title'><span class='object_link'><a href="../Cataract.html" title="Cataract (module)">Cataract</a></span></span>
     &raquo; 
    <span class="title">StylesheetScope</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="../class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><h1>Class: Cataract::StylesheetScope
  
  
  
</h1>
<div class="box_info">
  
  <dl>
    <dt>Inherits:</dt>
    <dd>
      <span class="inheritName">Object</span>
      
        <ul class="fullTree">
          <li>Object</li>
          
            <li class="next">Cataract::StylesheetScope</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
    </dd>
  </dl>
  

  
  
  
  
  <dl>
      <dt>Includes:</dt>
      <dd>Enumerable</dd>
  </dl>
  
  

  

  
  <dl>
    <dt>Defined in:</dt>
    <dd>lib/cataract/stylesheet_scope.rb</dd>
  </dl>
  
</div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    
<p>Chainable query scope for filtering Stylesheet rules.</p>

<p>Inspired by ActiveRecordâ€™s Relation, StylesheetScope provides a fluent interface for filtering and querying CSS rules. Scopes are lazy - filters are only applied during iteration.</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <h4 class="tag_title">Examples:</h4>
    
      
        <h5 class="example_title"><div class='inline'>
<p>Chaining filters</p>
</div></h5>
      
      <pre class="example code"><code><span class='id identifier rubyid_sheet'>sheet</span><span class='period'>.</span><span class='id identifier rubyid_with_media'>with_media</span><span class='lparen'>(</span><span class='symbol'>:print</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_with_specificity'>with_specificity</span><span class='lparen'>(</span><span class='int'>10</span><span class='op'>..</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_select'>select</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='symbol'>:selector?</span><span class='rparen'>)</span></code></pre>
    
      
        <h5 class="example_title"><div class='inline'>
<p>Inspect shows results</p>
</div></h5>
      
      <pre class="example code"><code><span class='id identifier rubyid_scope'>scope</span> <span class='op'>=</span> <span class='id identifier rubyid_sheet'>sheet</span><span class='period'>.</span><span class='id identifier rubyid_with_media'>with_media</span><span class='lparen'>(</span><span class='symbol'>:screen</span><span class='rparen'>)</span>
<span class='id identifier rubyid_scope'>scope</span><span class='period'>.</span><span class='id identifier rubyid_inspect'>inspect</span> <span class='comment'>#=&gt; &quot;#&lt;Cataract::StylesheetScope [...]&gt;&quot;</span></code></pre>
    
  </div>


</div>






  
    <h2>
      Instance Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#==-instance_method" title="#== (instance method)">#<strong>==</strong>(other)  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Compare the scope to another object.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#[]-instance_method" title="#[] (instance method)">#<strong>[]</strong>(index)  &#x21d2; Rule, ... </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Access a rule by index.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#base_only-instance_method" title="#base_only (instance method)">#<strong>base_only</strong>  &#x21d2; StylesheetScope </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Filter to only base rules (rules not inside any @media query).</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#each-instance_method" title="#each (instance method)">#<strong>each</strong> {|rule| ... } &#x21d2; Enumerator </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Iterate over filtered rules.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#empty%3F-instance_method" title="#empty? (instance method)">#<strong>empty?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Check if the scope has no matching rules.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#initialize-instance_method" title="#initialize (instance method)">#<strong>initialize</strong>(stylesheet, filters = {})  &#x21d2; StylesheetScope </a>
    

    
  </span>
  
  
    <span class="note title constructor">constructor</span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>A new instance of StylesheetScope.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#inspect-instance_method" title="#inspect (instance method)">#<strong>inspect</strong>  &#x21d2; String </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Human-readable representation showing filtered results.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#size-instance_method" title="#size (instance method)">#<strong>size</strong>  &#x21d2; Integer </a>
    

    
      (also: #length)
    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Get the number of rules matching the filters.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#to_ary-instance_method" title="#to_ary (instance method)">#<strong>to_ary</strong>  &#x21d2; Array </a>
    

    
  </span>
  
  
  
  
  
  
  <span class="private note title">private</span>

  
    <span class="summary_desc"><div class='inline'>
<p>Implicit conversion to Array for Ruby coercion.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#with_at_rule_type-instance_method" title="#with_at_rule_type (instance method)">#<strong>with_at_rule_type</strong>(type)  &#x21d2; StylesheetScope </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Filter by at-rule type.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#with_important-instance_method" title="#with_important (instance method)">#<strong>with_important</strong>(property = nil)  &#x21d2; StylesheetScope </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Filter to rules with !important declarations.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#with_media-instance_method" title="#with_media (instance method)">#<strong>with_media</strong>(media)  &#x21d2; StylesheetScope </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Filter by media query symbol(s).</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#with_property-instance_method" title="#with_property (instance method)">#<strong>with_property</strong>(property, value = nil)  &#x21d2; StylesheetScope </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Filter by CSS property name and optional value.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#with_selector-instance_method" title="#with_selector (instance method)">#<strong>with_selector</strong>(selector)  &#x21d2; StylesheetScope </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Filter by CSS selector.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#with_specificity-instance_method" title="#with_specificity (instance method)">#<strong>with_specificity</strong>(specificity)  &#x21d2; StylesheetScope </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Filter by CSS specificity.</p>
</div></span>
  
</li>

      
    </ul>
  


  <div id="constructor_details" class="method_details_list">
  <h2>Constructor Details</h2>
  
    <div class="method_details first">
  <h3 class="signature first" id="initialize-instance_method">
  
    #<strong>initialize</strong>(stylesheet, filters = {})  &#x21d2; <tt><span class='object_link'><a href="" title="Cataract::StylesheetScope (class)">StylesheetScope</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns a new instance of StylesheetScope.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


20
21
22
23</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/cataract/stylesheet_scope.rb', line 20</span>

<span class='kw'>def</span> <span class='id identifier rubyid_initialize'>initialize</span><span class='lparen'>(</span><span class='id identifier rubyid_stylesheet'>stylesheet</span><span class='comma'>,</span> <span class='id identifier rubyid_filters'>filters</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='ivar'>@stylesheet</span> <span class='op'>=</span> <span class='id identifier rubyid_stylesheet'>stylesheet</span>
  <span class='ivar'>@filters</span> <span class='op'>=</span> <span class='id identifier rubyid_filters'>filters</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
  
</div>


  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="==-instance_method">
  
    #<strong>==</strong>(other)  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Compare the scope to another object.</p>

<p>Forces evaluation of the scope and compares as an array.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>other</span>
      
      
        <span class='type'>(<tt>Object</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Object to compare with</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>true if equal</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


226
227
228</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/cataract/stylesheet_scope.rb', line 226</span>

<span class='kw'>def</span> <span class='op'>==</span><span class='lparen'>(</span><span class='id identifier rubyid_other'>other</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_to_a'>to_a</span> <span class='op'>==</span> <span class='id identifier rubyid_other'>other</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="[]-instance_method">
  
    #<strong>[]</strong>(index)  &#x21d2; <tt><span class='object_link'><a href="Rule.html" title="Cataract::Rule (class)">Rule</a></span></tt>, ... 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Access a rule by index.</p>

<p>Forces evaluation of the scope.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>index</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Index of the rule to access</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Rule.html" title="Cataract::Rule (class)">Rule</a></span></tt>, <tt><span class='object_link'><a href="AtRule.html" title="Cataract::AtRule (class)">AtRule</a></span></tt>, <tt>nil</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Rule at the given index, or nil</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


207
208
209</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/cataract/stylesheet_scope.rb', line 207</span>

<span class='kw'>def</span> <span class='op'>[]</span><span class='lparen'>(</span><span class='id identifier rubyid_index'>index</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_to_a'>to_a</span><span class='lbracket'>[</span><span class='id identifier rubyid_index'>index</span><span class='rbracket'>]</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="base_only-instance_method">
  
    #<strong>base_only</strong>  &#x21d2; <tt><span class='object_link'><a href="" title="Cataract::StylesheetScope (class)">StylesheetScope</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Filter to only base rules (rules not inside any @media query).</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <h4 class="tag_title">Examples:</h4>
    
      
        <h5 class="example_title"><div class='inline'>
<p>Get base rules only</p>
</div></h5>
      
      <pre class="example code"><code><span class='id identifier rubyid_sheet'>sheet</span><span class='period'>.</span><span class='id identifier rubyid_base_only'>base_only</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='symbol'>:selector</span><span class='rparen'>)</span>
<span class='id identifier rubyid_sheet'>sheet</span><span class='period'>.</span><span class='id identifier rubyid_base_only'>base_only</span><span class='period'>.</span><span class='id identifier rubyid_with_property'>with_property</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>color</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to_a'>to_a</span></code></pre>
    
  </div>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="" title="Cataract::StylesheetScope (class)">StylesheetScope</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>New scope with base_only filter applied</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


88
89
90</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/cataract/stylesheet_scope.rb', line 88</span>

<span class='kw'>def</span> <span class='id identifier rubyid_base_only'>base_only</span>
  <span class='const'><span class='object_link'><a href="" title="Cataract::StylesheetScope (class)">StylesheetScope</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="#initialize-instance_method" title="Cataract::StylesheetScope#initialize (method)">new</a></span></span><span class='lparen'>(</span><span class='ivar'>@stylesheet</span><span class='comma'>,</span> <span class='ivar'>@filters</span><span class='period'>.</span><span class='id identifier rubyid_merge'>merge</span><span class='lparen'>(</span><span class='label'>base_only:</span> <span class='kw'>true</span><span class='rparen'>)</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="each-instance_method">
  
    #<strong>each</strong> {|rule| ... } &#x21d2; <tt>Enumerator</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Iterate over filtered rules.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Yields:</p>
<ul class="yield">
  
    <li>
      
      
        <span class='type'>(<tt>rule</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Each rule matching the filters</p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Yield Parameters:</p>
<ul class="yieldparam">
  
    <li>
      
        <span class='name'>rule</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Rule.html" title="Cataract::Rule (class)">Rule</a></span></tt>, <tt><span class='object_link'><a href="AtRule.html" title="Cataract::AtRule (class)">AtRule</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The rule object</p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Enumerator</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Enumerator if no block given</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/cataract/stylesheet_scope.rb', line 125</span>

<span class='kw'>def</span> <span class='id identifier rubyid_each'>each</span>
  <span class='kw'>return</span> <span class='id identifier rubyid_enum_for'>enum_for</span><span class='lparen'>(</span><span class='symbol'>:each</span><span class='rparen'>)</span> <span class='kw'>unless</span> <span class='id identifier rubyid_block_given?'>block_given?</span>

  <span class='comment'># Get base rules set
</span>  <span class='id identifier rubyid_rules'>rules</span> <span class='op'>=</span> <span class='kw'>if</span> <span class='ivar'>@filters</span><span class='lbracket'>[</span><span class='symbol'>:base_only</span><span class='rbracket'>]</span>
            <span class='comment'># Get rules not in any media query
</span>            <span class='id identifier rubyid_media_index'>media_index</span> <span class='op'>=</span> <span class='ivar'>@stylesheet</span><span class='period'>.</span><span class='id identifier rubyid_instance_variable_get'>instance_variable_get</span><span class='lparen'>(</span><span class='symbol'>:@_media_index</span><span class='rparen'>)</span>
            <span class='id identifier rubyid_media_rule_ids'>media_rule_ids</span> <span class='op'>=</span> <span class='id identifier rubyid_media_index'>media_index</span><span class='period'>.</span><span class='id identifier rubyid_values'>values</span><span class='period'>.</span><span class='id identifier rubyid_flatten'>flatten</span><span class='period'>.</span><span class='id identifier rubyid_uniq'>uniq</span>
            <span class='ivar'>@stylesheet</span><span class='period'>.</span><span class='id identifier rubyid_rules'>rules</span><span class='period'>.</span><span class='id identifier rubyid_select'>select</span><span class='period'>.</span><span class='id identifier rubyid_with_index'>with_index</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid__rule'>_rule</span><span class='comma'>,</span> <span class='id identifier rubyid_idx'>idx</span><span class='op'>|</span> <span class='op'>!</span><span class='id identifier rubyid_media_rule_ids'>media_rule_ids</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_idx'>idx</span><span class='rparen'>)</span> <span class='rbrace'>}</span>
          <span class='kw'>elsif</span> <span class='ivar'>@filters</span><span class='lbracket'>[</span><span class='symbol'>:media</span><span class='rbracket'>]</span>
            <span class='id identifier rubyid_media_array'>media_array</span> <span class='op'>=</span> <span class='const'>Array</span><span class='lparen'>(</span><span class='ivar'>@filters</span><span class='lbracket'>[</span><span class='symbol'>:media</span><span class='rbracket'>]</span><span class='rparen'>)</span>

            <span class='comment'># :all is a special case meaning &quot;all rules&quot;
</span>            <span class='kw'>if</span> <span class='id identifier rubyid_media_array'>media_array</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='symbol'>:all</span><span class='rparen'>)</span>
              <span class='ivar'>@stylesheet</span><span class='period'>.</span><span class='id identifier rubyid_rules'>rules</span>
            <span class='kw'>else</span>
              <span class='id identifier rubyid_media_index'>media_index</span> <span class='op'>=</span> <span class='ivar'>@stylesheet</span><span class='period'>.</span><span class='id identifier rubyid_instance_variable_get'>instance_variable_get</span><span class='lparen'>(</span><span class='symbol'>:@_media_index</span><span class='rparen'>)</span>
              <span class='id identifier rubyid_rule_ids'>rule_ids</span> <span class='op'>=</span> <span class='id identifier rubyid_media_array'>media_array</span><span class='period'>.</span><span class='id identifier rubyid_flat_map'>flat_map</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_m'>m</span><span class='op'>|</span> <span class='id identifier rubyid_media_index'>media_index</span><span class='lbracket'>[</span><span class='id identifier rubyid_m'>m</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='lbracket'>[</span><span class='rbracket'>]</span> <span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_uniq'>uniq</span>
              <span class='id identifier rubyid_rule_ids'>rule_ids</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_id'>id</span><span class='op'>|</span> <span class='ivar'>@stylesheet</span><span class='period'>.</span><span class='id identifier rubyid_rules'>rules</span><span class='lbracket'>[</span><span class='id identifier rubyid_id'>id</span><span class='rbracket'>]</span> <span class='rbrace'>}</span>
            <span class='kw'>end</span>
          <span class='kw'>else</span>
            <span class='ivar'>@stylesheet</span><span class='period'>.</span><span class='id identifier rubyid_rules'>rules</span>
          <span class='kw'>end</span>

  <span class='comment'># Apply additional filters during iteration
</span>  <span class='id identifier rubyid_rules'>rules</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_rule'>rule</span><span class='op'>|</span>
    <span class='comment'># Specificity filter
</span>    <span class='kw'>if</span> <span class='ivar'>@filters</span><span class='lbracket'>[</span><span class='symbol'>:specificity</span><span class='rbracket'>]</span>
      <span class='kw'>next</span> <span class='kw'>if</span> <span class='id identifier rubyid_rule'>rule</span><span class='period'>.</span><span class='id identifier rubyid_specificity'>specificity</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span> <span class='comment'># AtRules have nil specificity
</span>      <span class='kw'>next</span> <span class='kw'>unless</span> <span class='kw'>case</span> <span class='ivar'>@filters</span><span class='lbracket'>[</span><span class='symbol'>:specificity</span><span class='rbracket'>]</span>
                  <span class='kw'>when</span> <span class='const'>Range</span>
                    <span class='ivar'>@filters</span><span class='lbracket'>[</span><span class='symbol'>:specificity</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_cover?'>cover?</span><span class='lparen'>(</span><span class='id identifier rubyid_rule'>rule</span><span class='period'>.</span><span class='id identifier rubyid_specificity'>specificity</span><span class='rparen'>)</span>
                  <span class='kw'>else</span>
                    <span class='ivar'>@filters</span><span class='lbracket'>[</span><span class='symbol'>:specificity</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='id identifier rubyid_rule'>rule</span><span class='period'>.</span><span class='id identifier rubyid_specificity'>specificity</span>
                  <span class='kw'>end</span>
    <span class='kw'>end</span>

    <span class='comment'># Selector filter (String or Regexp)
</span>    <span class='kw'>if</span> <span class='ivar'>@filters</span><span class='lbracket'>[</span><span class='symbol'>:selector</span><span class='rbracket'>]</span> <span class='op'>&amp;&amp;</span> <span class='op'>!</span><span class='kw'>case</span> <span class='ivar'>@filters</span><span class='lbracket'>[</span><span class='symbol'>:selector</span><span class='rbracket'>]</span>
                               <span class='kw'>when</span> <span class='const'>String</span>
                                 <span class='id identifier rubyid_rule'>rule</span><span class='period'>.</span><span class='id identifier rubyid_selector'>selector</span> <span class='op'>==</span> <span class='ivar'>@filters</span><span class='lbracket'>[</span><span class='symbol'>:selector</span><span class='rbracket'>]</span>
                               <span class='kw'>when</span> <span class='const'>Regexp</span>
                                 <span class='ivar'>@filters</span><span class='lbracket'>[</span><span class='symbol'>:selector</span><span class='rbracket'>]</span> <span class='op'>=~</span> <span class='id identifier rubyid_rule'>rule</span><span class='period'>.</span><span class='id identifier rubyid_selector'>selector</span>
                               <span class='kw'>end</span>
      <span class='kw'>next</span>
    <span class='kw'>end</span>

    <span class='comment'># Property filter
</span>    <span class='kw'>if</span> <span class='ivar'>@filters</span><span class='lbracket'>[</span><span class='symbol'>:property</span><span class='rbracket'>]</span> <span class='op'>&amp;&amp;</span> <span class='op'>!</span><span class='id identifier rubyid_rule'>rule</span><span class='period'>.</span><span class='id identifier rubyid_has_property?'>has_property?</span><span class='lparen'>(</span><span class='ivar'>@filters</span><span class='lbracket'>[</span><span class='symbol'>:property</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='ivar'>@filters</span><span class='lbracket'>[</span><span class='symbol'>:property_value</span><span class='rbracket'>]</span><span class='rparen'>)</span>
      <span class='kw'>next</span>
    <span class='kw'>end</span>

    <span class='comment'># At-rule type filter
</span>    <span class='kw'>if</span> <span class='ivar'>@filters</span><span class='lbracket'>[</span><span class='symbol'>:at_rule_type</span><span class='rbracket'>]</span> <span class='op'>&amp;&amp;</span> <span class='op'>!</span><span class='id identifier rubyid_rule'>rule</span><span class='period'>.</span><span class='id identifier rubyid_at_rule_type?'>at_rule_type?</span><span class='lparen'>(</span><span class='ivar'>@filters</span><span class='lbracket'>[</span><span class='symbol'>:at_rule_type</span><span class='rbracket'>]</span><span class='rparen'>)</span>
      <span class='kw'>next</span>
    <span class='kw'>end</span>

    <span class='comment'># Important filter
</span>    <span class='kw'>if</span> <span class='ivar'>@filters</span><span class='lbracket'>[</span><span class='symbol'>:important</span><span class='rbracket'>]</span> <span class='op'>&amp;&amp;</span> <span class='op'>!</span><span class='id identifier rubyid_rule'>rule</span><span class='period'>.</span><span class='id identifier rubyid_has_important?'>has_important?</span><span class='lparen'>(</span><span class='ivar'>@filters</span><span class='lbracket'>[</span><span class='symbol'>:important_property</span><span class='rbracket'>]</span><span class='rparen'>)</span>
      <span class='kw'>next</span>
    <span class='kw'>end</span>

    <span class='kw'>yield</span> <span class='id identifier rubyid_rule'>rule</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="empty?-instance_method">
  
    #<strong>empty?</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Check if the scope has no matching rules.</p>

<p>Forces evaluation of the scope.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>true if no rules match the filters</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


216
217
218</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/cataract/stylesheet_scope.rb', line 216</span>

<span class='kw'>def</span> <span class='id identifier rubyid_empty?'>empty?</span>
  <span class='id identifier rubyid_to_a'>to_a</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="inspect-instance_method">
  
    #<strong>inspect</strong>  &#x21d2; <tt>String</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Human-readable representation showing filtered results.</p>

<p>Forces evaluation of the scope and displays results.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Inspection string</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


246
247
248
249
250
251
252
253
254
255</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/cataract/stylesheet_scope.rb', line 246</span>

<span class='kw'>def</span> <span class='id identifier rubyid_inspect'>inspect</span>
  <span class='id identifier rubyid_rules'>rules</span> <span class='op'>=</span> <span class='id identifier rubyid_to_a'>to_a</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_rules'>rules</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
    <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>#&lt;Cataract::StylesheetScope []&gt;</span><span class='tstring_end'>&#39;</span></span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_preview'>preview</span> <span class='op'>=</span> <span class='id identifier rubyid_rules'>rules</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span><span class='lparen'>(</span><span class='int'>3</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='symbol'>:selector</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>, </span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
    <span class='id identifier rubyid_more'>more</span> <span class='op'>=</span> <span class='id identifier rubyid_rules'>rules</span><span class='period'>.</span><span class='id identifier rubyid_length'>length</span> <span class='op'>&gt;</span> <span class='int'>3</span> <span class='op'>?</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>, ...</span><span class='tstring_end'>&#39;</span></span> <span class='op'>:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span>
    <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>#&lt;Cataract::StylesheetScope [</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_preview'>preview</span><span class='embexpr_end'>}</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_more'>more</span><span class='embexpr_end'>}</span><span class='tstring_content'>] (</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_rules'>rules</span><span class='period'>.</span><span class='id identifier rubyid_length'>length</span><span class='embexpr_end'>}</span><span class='tstring_content'> rules)&gt;</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="size-instance_method">
  
    #<strong>size</strong>  &#x21d2; <tt>Integer</tt> 
  

  
    <span class="aliases">Also known as:
    <span class="names"><span id='length-instance_method'>length</span></span>
    </span>
  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Get the number of rules matching the filters.</p>

<p>Forces evaluation of the scope.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Number of matching rules</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


196
197
198</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/cataract/stylesheet_scope.rb', line 196</span>

<span class='kw'>def</span> <span class='id identifier rubyid_size'>size</span>
  <span class='id identifier rubyid_to_a'>to_a</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="to_ary-instance_method">
  
    #<strong>to_ary</strong>  &#x21d2; <tt>Array</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  You should avoid using this method if possible, as it may be removed or be changed in the future.
</p>

<p>Implicit conversion to Array for Ruby coercion.</p>

<p>This allows StylesheetScope to be used transparently as an Array in comparisons and other operations.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Array</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Array of matching rules</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


237
238
239</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/cataract/stylesheet_scope.rb', line 237</span>

<span class='kw'>def</span> <span class='id identifier rubyid_to_ary'>to_ary</span>
  <span class='id identifier rubyid_to_a'>to_a</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="with_at_rule_type-instance_method">
  
    #<strong>with_at_rule_type</strong>(type)  &#x21d2; <tt><span class='object_link'><a href="" title="Cataract::StylesheetScope (class)">StylesheetScope</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Filter by at-rule type.</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <h4 class="tag_title">Examples:</h4>
    
      
        <h5 class="example_title"><div class='inline'>
<p>Find all @keyframes</p>
</div></h5>
      
      <pre class="example code"><code><span class='id identifier rubyid_sheet'>sheet</span><span class='period'>.</span><span class='id identifier rubyid_with_at_rule_type'>with_at_rule_type</span><span class='lparen'>(</span><span class='symbol'>:keyframes</span><span class='rparen'>)</span></code></pre>
    
      
        <h5 class="example_title"><div class='inline'>
<p>Find all @font-face</p>
</div></h5>
      
      <pre class="example code"><code><span class='id identifier rubyid_sheet'>sheet</span><span class='period'>.</span><span class='id identifier rubyid_with_at_rule_type'>with_at_rule_type</span><span class='lparen'>(</span><span class='symbol'>:font_face</span><span class='rparen'>)</span></code></pre>
    
  </div>
<p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>type</span>
      
      
        <span class='type'>(<tt>Symbol</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>At-rule type to match (:keyframes, :font_face, etc.)</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="" title="Cataract::StylesheetScope (class)">StylesheetScope</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>New scope with at-rule type filter applied</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


102
103
104</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/cataract/stylesheet_scope.rb', line 102</span>

<span class='kw'>def</span> <span class='id identifier rubyid_with_at_rule_type'>with_at_rule_type</span><span class='lparen'>(</span><span class='id identifier rubyid_type'>type</span><span class='rparen'>)</span>
  <span class='const'><span class='object_link'><a href="" title="Cataract::StylesheetScope (class)">StylesheetScope</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="#initialize-instance_method" title="Cataract::StylesheetScope#initialize (method)">new</a></span></span><span class='lparen'>(</span><span class='ivar'>@stylesheet</span><span class='comma'>,</span> <span class='ivar'>@filters</span><span class='period'>.</span><span class='id identifier rubyid_merge'>merge</span><span class='lparen'>(</span><span class='label'>at_rule_type:</span> <span class='id identifier rubyid_type'>type</span><span class='rparen'>)</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="with_important-instance_method">
  
    #<strong>with_important</strong>(property = nil)  &#x21d2; <tt><span class='object_link'><a href="" title="Cataract::StylesheetScope (class)">StylesheetScope</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Filter to rules with !important declarations.</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <h4 class="tag_title">Examples:</h4>
    
      
        <h5 class="example_title"><div class='inline'>
<p>Find all rules with any !important</p>
</div></h5>
      
      <pre class="example code"><code><span class='id identifier rubyid_sheet'>sheet</span><span class='period'>.</span><span class='id identifier rubyid_with_important'>with_important</span></code></pre>
    
      
        <h5 class="example_title"><div class='inline'>
<p>Find rules with color !important</p>
</div></h5>
      
      <pre class="example code"><code><span class='id identifier rubyid_sheet'>sheet</span><span class='period'>.</span><span class='id identifier rubyid_with_important'>with_important</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>color</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span></code></pre>
    
  </div>
<p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>property</span>
      
      
        <span class='type'>(<tt>String</tt>, <tt>nil</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>nil</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>Optional property name to match</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="" title="Cataract::StylesheetScope (class)">StylesheetScope</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>New scope with important filter applied</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


116
117
118</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/cataract/stylesheet_scope.rb', line 116</span>

<span class='kw'>def</span> <span class='id identifier rubyid_with_important'>with_important</span><span class='lparen'>(</span><span class='id identifier rubyid_property'>property</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='rparen'>)</span>
  <span class='const'><span class='object_link'><a href="" title="Cataract::StylesheetScope (class)">StylesheetScope</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="#initialize-instance_method" title="Cataract::StylesheetScope#initialize (method)">new</a></span></span><span class='lparen'>(</span><span class='ivar'>@stylesheet</span><span class='comma'>,</span> <span class='ivar'>@filters</span><span class='period'>.</span><span class='id identifier rubyid_merge'>merge</span><span class='lparen'>(</span><span class='label'>important:</span> <span class='kw'>true</span><span class='comma'>,</span> <span class='label'>important_property:</span> <span class='id identifier rubyid_property'>property</span><span class='rparen'>)</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="with_media-instance_method">
  
    #<strong>with_media</strong>(media)  &#x21d2; <tt><span class='object_link'><a href="" title="Cataract::StylesheetScope (class)">StylesheetScope</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Filter by media query symbol(s).</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <h4 class="tag_title">Examples:</h4>
    
      
      <pre class="example code"><code><span class='id identifier rubyid_sheet'>sheet</span><span class='period'>.</span><span class='id identifier rubyid_with_media'>with_media</span><span class='lparen'>(</span><span class='symbol'>:print</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_with_media'>with_media</span><span class='lparen'>(</span><span class='symbol'>:screen</span><span class='rparen'>)</span> <span class='comment'># overwrites to :screen</span></code></pre>
    
  </div>
<p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>media</span>
      
      
        <span class='type'>(<tt>Symbol</tt>, <tt>Array&lt;Symbol&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Media query symbol(s)</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="" title="Cataract::StylesheetScope (class)">StylesheetScope</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>New scope with media filter applied</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


32
33
34</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/cataract/stylesheet_scope.rb', line 32</span>

<span class='kw'>def</span> <span class='id identifier rubyid_with_media'>with_media</span><span class='lparen'>(</span><span class='id identifier rubyid_media'>media</span><span class='rparen'>)</span>
  <span class='const'><span class='object_link'><a href="" title="Cataract::StylesheetScope (class)">StylesheetScope</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="#initialize-instance_method" title="Cataract::StylesheetScope#initialize (method)">new</a></span></span><span class='lparen'>(</span><span class='ivar'>@stylesheet</span><span class='comma'>,</span> <span class='ivar'>@filters</span><span class='period'>.</span><span class='id identifier rubyid_merge'>merge</span><span class='lparen'>(</span><span class='label'>media:</span> <span class='id identifier rubyid_media'>media</span><span class='rparen'>)</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="with_property-instance_method">
  
    #<strong>with_property</strong>(property, value = nil)  &#x21d2; <tt><span class='object_link'><a href="" title="Cataract::StylesheetScope (class)">StylesheetScope</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Filter by CSS property name and optional value.</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <h4 class="tag_title">Examples:</h4>
    
      
        <h5 class="example_title"><div class='inline'>
<p>Find rules with color property</p>
</div></h5>
      
      <pre class="example code"><code><span class='id identifier rubyid_sheet'>sheet</span><span class='period'>.</span><span class='id identifier rubyid_with_property'>with_property</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>color</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span></code></pre>
    
      
        <h5 class="example_title"><div class='inline'>
<p>Find rules with specific property value</p>
</div></h5>
      
      <pre class="example code"><code><span class='id identifier rubyid_sheet'>sheet</span><span class='period'>.</span><span class='id identifier rubyid_with_property'>with_property</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>position</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>absolute</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
<span class='id identifier rubyid_sheet'>sheet</span><span class='period'>.</span><span class='id identifier rubyid_with_property'>with_property</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>color</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>red</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span></code></pre>
    
  </div>
<p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>property</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>CSS property name to match</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>value</span>
      
      
        <span class='type'>(<tt>String</tt>, <tt>nil</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>nil</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>Optional property value to match</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="" title="Cataract::StylesheetScope (class)">StylesheetScope</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>New scope with property filter applied</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


77
78
79</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/cataract/stylesheet_scope.rb', line 77</span>

<span class='kw'>def</span> <span class='id identifier rubyid_with_property'>with_property</span><span class='lparen'>(</span><span class='id identifier rubyid_property'>property</span><span class='comma'>,</span> <span class='id identifier rubyid_value'>value</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='rparen'>)</span>
  <span class='const'><span class='object_link'><a href="" title="Cataract::StylesheetScope (class)">StylesheetScope</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="#initialize-instance_method" title="Cataract::StylesheetScope#initialize (method)">new</a></span></span><span class='lparen'>(</span><span class='ivar'>@stylesheet</span><span class='comma'>,</span> <span class='ivar'>@filters</span><span class='period'>.</span><span class='id identifier rubyid_merge'>merge</span><span class='lparen'>(</span><span class='label'>property:</span> <span class='id identifier rubyid_property'>property</span><span class='comma'>,</span> <span class='label'>property_value:</span> <span class='id identifier rubyid_value'>value</span><span class='rparen'>)</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="with_selector-instance_method">
  
    #<strong>with_selector</strong>(selector)  &#x21d2; <tt><span class='object_link'><a href="" title="Cataract::StylesheetScope (class)">StylesheetScope</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Filter by CSS selector.</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <h4 class="tag_title">Examples:</h4>
    
      
        <h5 class="example_title"><div class='inline'>
<p>Exact string match</p>
</div></h5>
      
      <pre class="example code"><code><span class='id identifier rubyid_sheet'>sheet</span><span class='period'>.</span><span class='id identifier rubyid_with_selector'>with_selector</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>body</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
<span class='id identifier rubyid_sheet'>sheet</span><span class='period'>.</span><span class='id identifier rubyid_with_media'>with_media</span><span class='lparen'>(</span><span class='symbol'>:print</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_with_selector'>with_selector</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>.header</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span></code></pre>
    
      
        <h5 class="example_title"><div class='inline'>
<p>Pattern matching</p>
</div></h5>
      
      <pre class="example code"><code><span class='id identifier rubyid_sheet'>sheet</span><span class='period'>.</span><span class='id identifier rubyid_with_selector'>with_selector</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\.btn-</span><span class='regexp_end'>/</span></span><span class='rparen'>)</span>  <span class='comment'># All .btn-* classes
</span><span class='id identifier rubyid_sheet'>sheet</span><span class='period'>.</span><span class='id identifier rubyid_with_selector'>with_selector</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>^#</span><span class='regexp_end'>/</span></span><span class='rparen'>)</span>      <span class='comment'># All ID selectors</span></code></pre>
    
  </div>
<p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>selector</span>
      
      
        <span class='type'>(<tt>String</tt>, <tt>Regexp</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>CSS selector to match (exact string or pattern)</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="" title="Cataract::StylesheetScope (class)">StylesheetScope</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>New scope with selector filter applied</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


61
62
63</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/cataract/stylesheet_scope.rb', line 61</span>

<span class='kw'>def</span> <span class='id identifier rubyid_with_selector'>with_selector</span><span class='lparen'>(</span><span class='id identifier rubyid_selector'>selector</span><span class='rparen'>)</span>
  <span class='const'><span class='object_link'><a href="" title="Cataract::StylesheetScope (class)">StylesheetScope</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="#initialize-instance_method" title="Cataract::StylesheetScope#initialize (method)">new</a></span></span><span class='lparen'>(</span><span class='ivar'>@stylesheet</span><span class='comma'>,</span> <span class='ivar'>@filters</span><span class='period'>.</span><span class='id identifier rubyid_merge'>merge</span><span class='lparen'>(</span><span class='label'>selector:</span> <span class='id identifier rubyid_selector'>selector</span><span class='rparen'>)</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="with_specificity-instance_method">
  
    #<strong>with_specificity</strong>(specificity)  &#x21d2; <tt><span class='object_link'><a href="" title="Cataract::StylesheetScope (class)">StylesheetScope</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Filter by CSS specificity.</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <h4 class="tag_title">Examples:</h4>
    
      
      <pre class="example code"><code><span class='id identifier rubyid_sheet'>sheet</span><span class='period'>.</span><span class='id identifier rubyid_with_specificity'>with_specificity</span><span class='lparen'>(</span><span class='int'>10</span><span class='rparen'>)</span>      <span class='comment'># exactly 10
</span><span class='id identifier rubyid_sheet'>sheet</span><span class='period'>.</span><span class='id identifier rubyid_with_specificity'>with_specificity</span><span class='lparen'>(</span><span class='int'>10</span><span class='op'>..</span><span class='rparen'>)</span>    <span class='comment'># 10 or higher
</span><span class='id identifier rubyid_sheet'>sheet</span><span class='period'>.</span><span class='id identifier rubyid_with_specificity'>with_specificity</span><span class='lparen'>(</span><span class='int'>5</span><span class='op'>...</span><span class='int'>10</span><span class='rparen'>)</span>  <span class='comment'># between 5 and 9</span></code></pre>
    
  </div>
<p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>specificity</span>
      
      
        <span class='type'>(<tt>Integer</tt>, <tt>Range</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Specificity value or range</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="" title="Cataract::StylesheetScope (class)">StylesheetScope</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>New scope with specificity filter applied</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


45
46
47</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/cataract/stylesheet_scope.rb', line 45</span>

<span class='kw'>def</span> <span class='id identifier rubyid_with_specificity'>with_specificity</span><span class='lparen'>(</span><span class='id identifier rubyid_specificity'>specificity</span><span class='rparen'>)</span>
  <span class='const'><span class='object_link'><a href="" title="Cataract::StylesheetScope (class)">StylesheetScope</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="#initialize-instance_method" title="Cataract::StylesheetScope#initialize (method)">new</a></span></span><span class='lparen'>(</span><span class='ivar'>@stylesheet</span><span class='comma'>,</span> <span class='ivar'>@filters</span><span class='period'>.</span><span class='id identifier rubyid_merge'>merge</span><span class='lparen'>(</span><span class='label'>specificity:</span> <span class='id identifier rubyid_specificity'>specificity</span><span class='rparen'>)</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

      <div id="footer">
  Generated on Mon Nov 10 00:27:06 2025 by
  <a href="https://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.37 (ruby-3.4.7).
</div>

    </div>
  </body>
</html>